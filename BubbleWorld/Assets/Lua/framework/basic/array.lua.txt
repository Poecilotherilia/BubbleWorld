---
--- Generated by lvyuqiang
--- File name : array.lua.txt
--- DateTime : 2021/08/03
--- Description : array
---

---@class array
local array = {}

---@public
---@return array
function array.new(is_weak)
    local instance = {
        cname = "array",
        ---@private
        ary = {},
        ---@private
        size = 0,
    }
    if is_weak then
        setmetatable(instance, { __mode = "v" })
    end
    return setmetatable(instance, array)
end

---添加元素
---@public
---@return boolean
---@param value any 元素
function array:add(value)
    if not value then
        return false
    end
    self.ary[#self.ary + 1] = value
    self.size = self.size + 1
    return true
end

---移除元素
---@public
---@return boolean
---@param value any 元素
function array:remove(value)
    if not value then
        return false
    end

    local success = false
    for i = #self.ary, 1, -1 do
        if self.ary[i] == value then
            table.remove(self.ary, i)
            self.size = self.size - 1
            success = true
        end
    end
    return success
end

---是否包含元素
---@public
---@return boolean
---@param value any 元素
function array:contains(value)
    if not value then
        return false
    end

    for i = 1, #self.ary do
        if self.ary[i] == value then
            return true
        end
    end
    return false
end

---获取元素数量
---@public
---@return number
function array:count()
    return self.size
end

---是否为空
---@public
---@return boolean
function array:is_empty()
    return self:count() == 0
end

---遍历
---@public
---@param action function 遍历function(v)
function array:foreach(action, ...)
    if action == nil then
        return
    end
    for i = 1, self.size do
        action(self.ary[i], ...)
    end
end

---清理
---@public
---@return void
function array:clear()
    for i = 1, #self.ary do
        self.ary[i] = nil
    end
end

---销毁
---@public
function array:dispose()
    self:clear()
    self.ary = nil
    self.size = nil
end

return array