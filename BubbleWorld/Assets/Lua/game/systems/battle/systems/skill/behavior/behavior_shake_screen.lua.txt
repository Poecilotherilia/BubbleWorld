---
--- Generated by wuhaijun
--- File name : behavior_shake_screen.lua.txt
--- DateTime : 2023/02/07
--- Description : 震屏
---

---@type battle_helper
local helper = battle_helper
---@type battle_components
local battle_components = require(helper.path.battle_components)

---@type base_behavior
local super = require(helper.path.battle_skill .. 'behavior/base_behavior')

---@class behavior_shake_screen : base_behavior
local behavior_shake_screen = class("behavior_shake_screen", super)

---构造函数
---@protected
function behavior_shake_screen:ctor()
    super.ctor(self, self.cname)
end

---行为开始，根据配置延迟后开始
---@protected
function behavior_shake_screen:on_start()
    ---@type shake_screen_config
    local data = self.behavior_data.behavior_args.ShakeScreenConfigData
    if data.ShakeDuration <= 0 then return end

    ---@type entity
    local entity, _ = self.context:get_unique_component(battle_components.skill_entity)
    if not entity:has_component(battle_components.shake_screen) then
        entity:add_component(battle_components.shake_screen, data.ShakeDuration, data.ShakeDirection, data.ShakeShapeCurve, data.ShakeForce)
    end
end

return behavior_shake_screen