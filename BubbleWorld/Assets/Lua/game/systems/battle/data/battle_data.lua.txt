---
--- Generated by wuhaijun
--- File name : battle_data.lua.txt
--- DateTime : 2021/07/6
--- Description : 战斗数据结构
---

--region 组件数据
---战斗资源数据
---@class battle_asset_data_data
---@field res_path string 资源配置
---@field render_script string 脚本名字
local battle_asset_data_data

---效果处理组件数据
---@class skill_entity_component_data
---@field effect_list BTLEffect[] 效果数据列表
---@field used_count number 已使用的效果个数
local skill_entity_component_data

---效果处理组件数据
---@class effects_handler_component_data
---@field effect_list BTLEffect[] 效果数据列表
---@field idx_list number[] 索引值列表
---@field source_mid string 来源mid
local effects_handler_component_data

---技能处理组件数据
---@class skill_handler_component_data
---@field queue_stack stack battle_skill_data 队列堆栈
---@field skill_hash hashset t<battle_skill_data, boolean> 当前正在执行的"技能"(skill/buff/system)
local skill_handler_component_data

---技能运行数据
---@class skill_running_component_data
---@field skill_data battle_skill_data 技能数据
---@field running_queue queue skill_running_data 技能要执行的行为队列
local battle_skill_running_data

---技能运行数据
---@class skill_running_data
---@field behavior_id number 行为配置id
---@field current_eid number 当前实体的eid，执行该行为的实体
---@field dynamic_eid number 动态行为目标eid，用于指定子弹击中的目标
---@field additional_data any 用于行为间传递额外的运行时数据
local skill_running_data

---技能相机组件数据
---@class skill_camera_component_data
---@field skill_type skill_camera_skill_type 技能类型
---@field event_type skill_camera_event_type 执行步骤
---@field flow_type skill_camera_flow_type 镜头流程
---@field target_eid number 技能主目标实体ID
---@field blend_time number 融合时间
---@field action_name string 镜头动画名
---@field look_at_time_ratio number 相机看向目标时间占比
local skill_camera_data

---buff_handler组件数据
---@class buff_behavior_component_data
---@field buff_uid Ident buff唯一id
---@field event_type buff_trigger_event_type 触发事件类型
---@field skill_data battle_skill_data 技能数据【可选】
---@field perform_state buff_perform_state 表演状态【可选】
local buff_handler_component_data

---buff运行时数据
---@class skill_buff_running_data
---@field type number 类型：1=动作，2=特效
---@field id string type=2时表示循环特效id，type=3时Buff表示唯一ID
local buff_data_running_data

---buff_data组件数据
---@class buff_data_component_data
---@field buff_uid ident Buff唯一ID
---@field buff_mid string Buff配置ID
---@field buff_type battle_buff_type Buff类型
---@field buff_director_data buff_director_data Buff导演数据
---@field running_data table<any, skill_buff_running_data> buff运行时数据
local buff_data_component_data

---visual_follow组件数据
---@class visual_follow_component_data
---@field tar_x number 目标坐标x分量
---@field tar_y number 目标坐标y分量
---@field tar_z number 目标坐标z分量
---@field time number 转向持续时间
local visual_follow_component_data

---visual_follow_running组件数据
---@class visual_follow_running_component_data
---@field start_qua quaternion 起始四元数
---@field end_qua quaternion 结束四元数
---@field duration number 持续时间
---@field elapsed number 流逝时间
local visual_follow_running_component_data

---预加载技能
---@class preload_skill_component_data
---@field skill_list table<string, Ident> 技能id和技能目标
---@field next_skill_mid string 技能id
---@field next_target_uid Ident 技能目标battle_material_operation_config
---@field ignore_effect boolean 是否忽略特效
local preload_skill_component_data

---单位状态组件
---@class unit_state_component_data
---@field current string 当前状态表id
---@field history stack 历史状态表<string> 
local unit_state_component_data

---状态限制组件数据
---@class state_constraint_component_data
---@field value number 状态限制类型集合
local state_constraint_component_data

---播放动画组件数据
---@class unit_action_component_data
---@field name number 动画属性名字 
---@field is_loop boolean 是否循环 
---@field fade_time number 与上一个动作的融合时间 -1表示使用默认融合时间
---@field callback fun(eid:number) 播放完毕回调 
local unit_action_component_data

---战斗地图组件数据
---@class battle_map_component_data
---@field is_show boolean 是否压黑
---@field begin_value number 起始值
---@field end_value number 结束值 
---@field duration number 持续时间
local battle_map_component_data
--endregion

--region 战斗中使用的数据
---战斗单位信息
---@class battle_unit_info
---@field uid ident 唯一id
---@field unit_type unit_type_flag 单位类型标识
---@field team_type team_type_flag 队伍类型标识
---@field position vector3 出生位置
---@field rotation vector3 出生旋转
---@field scale vector3 缩放
---@field pos_offset vector3 位置偏移值
---@field role_res_mid string RoleRes表id
---@field config_id string Witch表或Monster表Id
---@field enemy_mid string Enemy表id
---@field role_rare number 角色稀有度 1=R 2=SR 3=SSR
---@field pos_index number 位置索引
---@field res_path string 资源路径
---@field body_type role_body_type 角色体行
---@field index_point_info BattleUnitIndexPoint 单位索引点位数据
---@field hp_value number 血量值
---@field is_death boolean 是否死亡
---@field death_type battle_unit_death_type 死亡类型
---@field is_init boolean 是否创建实体
local battle_unit_info

---技能事件数据
---@class skill_event_data
---@field event_id string 事件id
---@field trigger_id string 要触发的技能或buff id
local skill_event_data

---战斗效果(服务器)数据
---@class battle_effect_data
---@field pre_idx_list number[] 待触发效果索引值列表
---@field post_idx_list number[] 待触发效果索引值列表
---@field effect BTLEffect 服务器技能效果数据
local battle_effect_data

---战斗技能数据
---@class battle_skill_data
---@field mid string 配表id，可能是技能id或buff id
---@field type skill_data_type 数据类型
---@field caster_uid Ident 施法者uid
---@field target_uid Ident 作用目标uid
---@field guid Ident 效果归属
---@field effect_list battle_effect_data[] 效果数据列表
---@field is_single_attack boolean 技能是否是单体攻击技能
---@field is_add_buff_skill boolean 空表现技能，用于加buff
---@field skill_director_data skill_director_data 当前要执行SkillDirector数据
---@field buff_director_data buff_director_data 当前要执行BuffDirector数据
local battle_skill_data

---技能运行时数据
---@class skill_runtime_data
---@field skill_data battle_skill_data 技能数据
---@field running_data skill_running_data 技能运行数据
local skill_runtime_data

---渲染特效数据
---@class render_effect_data
---@field effect_mid string 特效配表id
---@field position_x vector3 x坐标
---@field position_y vector3 y坐标
---@field position_z vector3 z坐标
---@field is_sub_obj number 默认值是0=特效成为挂点子物体，1=只取挂点位置信息
---@field point_name string 挂点名字
local render_effect_data

---要执行的行为数据
---@class skill_behavior_data
---@field cid number 配置ID
---@field bid number 行为ID
---@field is_internal boolean 是否是内部生成的行为
---@field run_data skill_running_data 技能执行数据
---@field get_behavior_data_callback fun():skill_behavior_data 获取新的行为数据
---@field generate_behavior_callback fun(...:any):number 生成行为回调
---@field behavior_finished_callback fun(data:skill_behavior_data) 行为结束回调
---@field delay_time number 延迟执行时间，skill_behavior_config_data.Delay
---@field duration_time number 持续执行时间，skill_behavior_config_data.Duration
---@field class_name string 行为类型表id，skill_behavior_config_data.BehaviorId
---@field behavior_args skill_behavior_config_args 行为参数，skill_behavior_config_data.BehaviorArgs
---@field follow_up_ids number[] 后续的行为，skill_behavior_config_data.FollowUpIds
local skill_behavior_data
--endregion