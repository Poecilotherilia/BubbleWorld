---
--- Generated by libin
--- File name : explore_fade_mask_render_unit.lua.txt
--- DataTime : 2022/10/31
--- Description : 
---

local explore_node_event_type = enum.experience.explore_node_event_type

---@class explore_fade_mask_render_unit
local explore_fade_mask_render_unit = class("explore_fade_mask_render_unit")

--region base api

---构造方法
---@protected
---@param cs_mask_unit Game.Explore.ExploreFadeMaskUnit
---@param node_data explore_node_data
function explore_fade_mask_render_unit:ctor(cs_mask_unit, node_data)
    ---@type Game.Explore.ExploreFadeMaskUnit
    self.cs_unit = cs_mask_unit
    ---@type explore_node_data
    self.node_data = node_data
    
    self:update_render_unit()
end

---@public
function explore_fade_mask_render_unit:dispose()
    self.cs_unit = nil
    self.node_data = nil
end

--endregion

--region

---@public
function explore_fade_mask_render_unit:update_render_unit()
    --TODO：检查显隐
    local state = self.node_data.state
    if state < 1 then
        self.cs_unit:UpdateState(0)
    elseif state == 1 then
        local flag = game_data_manager.explore:get_explore_node_anim_flag_by_id(self.node_data.node.Id)
        if flag == 0 then
            self.cs_unit:UpdateState(1)
        else
            self.cs_unit:UpdateState(2)
        end
    else
        --章节最后一个节点
        if self.node_data.node.EventType == explore_node_event_type.TRANSMIT_OTHER
                or self.node_data.node.EventType == explore_node_event_type.TRANSMIT_HOME
        then
            local flag = game_data_manager.explore:get_explore_node_anim_flag_by_id(self.node_data.node.Id)
            if flag == 0 then
                self.cs_unit:UpdateState(1)
            else
                self.cs_unit:UpdateState(2)
            end
        else
            self.cs_unit:UpdateState(2)
        end
    end
end

---过得擦除名称
---@public
---@return string
function explore_fade_mask_render_unit:get_mask_name()
    return self.node_data:get_node_name()
end

--endregion

return explore_fade_mask_render_unit
